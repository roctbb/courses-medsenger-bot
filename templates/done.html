{% extends "base_vue.html" %}
{% block title %}Тест заполнен{% endblock %}
{% block content %}
    <h3 style="text-align: center; margin-bottom: 15px;">Тест заполнен</h3>

    <div class="container">
        <div class="row">
            <div class="col-12">
                {% if status == 0 %}
                    <div class="alert alert-danger" role="alert">
                        <h4 class="alert-heading">Вы не получили баллы!</h4>
                        <p>Вы ответили неправильно на все вопросы! Не волнуйтесь, мы учимся на ошибках! Вы могли получить {{ maxpoints }} баллов</p>
                        <hr>
                        <p class="mb-0">Всего у вас {{ balance }} {{ b }}.</p>
                    </div>
                {% elif status == 1 %}
                    <div class="alert alert-warning" role="alert">
                        <h4 class="alert-heading">Вы получили неполное количество баллов!</h4>
                        <p>Вы ответили на вопросы частично правильно и получили {{ points }} {{ p }} из {{ maxpoints }}!</p>
                        <hr>
                        <p class="mb-0">Всего у вас {{ balance }} {{ b }}.</p>
                    </div>
                {% elif status == 2 %}
                    <div class="alert alert-success" role="alert">
                        <h4 class="alert-heading">Вы получили максимальное количество баллов!</h4>
                        <p>Вы ответили правильно на все вопросы и получили {{ points }} {{ p }} из {{ maxpoints }}!</p>
                        <hr>
                        <p class="mb-0">Всего у вас {{ balance }} {{ b }}.</p>
                    </div>
                {% endif %}

                <p></p>

                {% for task in lesson.tasks %}
                    <div class="card">
                        <div class="card-body">

                            <h5>{{ task.question }}</h5>

                            {% set question_loop = loop %}
                            {% for variant in task.variants %}
                                <div class="form-check my-2">
                                    {% if loop.index0|string == request.form['question_%s' % question_loop.index0] %}
                                        <input class="form-check-input" type="radio" checked disabled>
                                    {% else %}
                                        <input class="form-check-input" type="radio" disabled>
                                    {% endif %}

                                    {% if variant.points >= 1 %}
                                        <b style="color: green">
                                            {{ variant.text }}
                                        </b>
                                        <i>
                                            ( +{{ variant.points }} баллов)
                                        </i>
                                    {% else %}
                                        <b>
                                            {{ variant.text }}
                                        </b>
                                    {% endif %}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <p></p>
                {% endfor %}


            </div>
        </div>
    </div>

    <p></p>

    <p style="text-align: center">
        <small>Окно закроется автоматически через 5 секунд.</small>
        <br>
        <small>вы можете закрыть его кнопкой ниже</small>
    </p>

    <div class="d-grid gap-2 col-3 mx-auto">
        <button class="btn btn-success btn-lg" id="submit_button" onclick="closeButton()">Закрыть</button>
    </div>

    <p></p>

    <script>
        setTimeout(function () {
            window.parent.postMessage('close-modal-success', '*');
            window.close();
        }, 5000)
    </script>

    <script>
        closeButton(function () {
            window.parent.postMessage('close-modal-success', '*');
            window.close();
        })
    </script>



{% endblock %}